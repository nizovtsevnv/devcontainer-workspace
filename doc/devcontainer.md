# DevContainer - –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–∞—è —Å—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

Polyglot –æ–∫—Ä—É–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ **Debian 12 (Bookworm) LTS** —Å–æ –≤—Å–µ–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —Å—Ç–µ–∫–∞—Ö.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –û—Ç–∫—Ä—ã—Ç–∏–µ workspace –≤ DevContainer

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ –Ω–æ–≤—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º
git clone --recurse-submodules git@github.com:nizovtsevnv/devcontainer-workspace.git
cd devcontainer-workspace

# –û—Ç–∫—Ä—ã—Ç—å –≤ VS Code
code .
```

–í VS Code:
1. –ù–∞–∂–º–∏—Ç–µ `F1` –∏–ª–∏ `Ctrl+Shift+P`
2. –í—ã–±–µ—Ä–∏—Ç–µ `Dev Containers: Reopen in Container`
3. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–±–æ—Ä–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (5-10 –º–∏–Ω—É—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

```bash
# –ü–æ—Å–ª–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
node --version
npm --version
php --version
composer --version
rustc --version
cargo --version
git --version
make --version
docker --version
```

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### Node.js
- **–ü–∞–∫–µ—Ç–Ω—ã–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã:** npm, yarn, pnpm
- **TypeScript:** typescript, ts-node
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:** eslint, prettier, nodemon, pm2
- **–§—Ä–µ–π–º–≤–æ—Ä–∫–∏ CLI:** @nestjs/cli, vite

#### PHP
- **–†–∞—Å—à–∏—Ä–µ–Ω–∏—è:**
  - –û—Å–Ω–æ–≤–Ω—ã–µ: curl, mbstring, xml, zip
  - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: mysql, pgsql, sqlite3, redis
  - –ü—Ä–æ—á–∏–µ: bcmath, intl, gd, opcache, xdebug
- **–ü–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä:** Composer
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
  - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: PHPUnit
  - –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞: PHP_CodeSniffer, PHPStan, PHP-CS-Fixer

#### Rust (nightly)
- **–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä:** rustc
- **–ü–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä:** cargo
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:** rustfmt, clippy, rust-analyzer
- **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:** cargo-watch, cargo-edit, cargo-outdated

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- `git` - –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π
- `make` - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
- `build-essential` - –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã (gcc, g++, etc)
- `curl`, `wget` - HTTP –∫–ª–∏–µ–Ω—Ç—ã

### Docker
- `docker` - Docker CLI –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å host Docker
- `docker-compose` - –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

### –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- `jq` - –ü–∞—Ä—Å–∏–Ω–≥ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ JSON
- `yq` - –ü–∞—Ä—Å–∏–Ω–≥ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ YAML

### –§–∞–π–ª–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
- `tree` - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–µ—Ä–µ–≤–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤
- `file` - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
- `zip`, `unzip` - –†–∞–±–æ—Ç–∞ —Å –∞—Ä—Ö–∏–≤–∞–º–∏

### –†–µ–¥–∞–∫—Ç–æ—Ä—ã
- `vim` - –¢–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
- `nano` - –ü—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- `htop` - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### –°–µ—Ç–µ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã
- `netcat` - –†–∞–±–æ—Ç–∞ —Å TCP/UDP
- `ping` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Ö–æ—Å—Ç–æ–≤
- `dig`, `nslookup` - DNS –∑–∞–ø—Ä–æ—Å—ã
- `telnet` - Telnet –∫–ª–∏–µ–Ω—Ç

## –†–∞–±–æ—Ç–∞ —Å —Å—É–±–º–æ–¥—É–ª—è–º–∏

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—É–±–º–æ–¥—É–ª–µ–π
git submodule update --init --recursive

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É–±–º–æ–¥—É–ª–µ–π
git submodule update --remote --merge

# –°—Ç–∞—Ç—É—Å —Å—É–±–º–æ–¥—É–ª–µ–π
git submodule foreach 'git status'
```

## –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### Container Runtime (–æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤)
- **Docker** + Docker Compose
- **Podman** + Podman Compose

### –ü—Ä–æ—á–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Git >= 2.40
- Make >= 4.0
- VS Code + —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ [Dev Containers](https://marketplace.visualstudio.com/items?itemName=ms-vscode-remote.remote-containers)
- –ú–∏–Ω–∏–º—É–º 4GB RAM (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 8GB)
- 10GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Podman

**Podman** - —ç—Ç–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Docker –±–µ–∑ –¥–µ–º–æ–Ω–∞, —Ä–∞–±–æ—Ç–∞—é—â–∞—è –≤ rootless —Ä–µ–∂–∏–º–µ.

**Linux:**
```bash
# –í–∫–ª—é—á–µ–Ω–∏–µ Podman socket (—ç–º—É–ª—è—Ü–∏—è Docker API)
systemctl --user enable --now podman.socket

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è —É–∫–∞–∑—ã–≤–∞—é—â—É—é –Ω–∞ Podman socket –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Docker
export DOCKER_HOST=unix:///run/user/$UID/podman/podman.sock
```

**macOS / Windows:**

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∫–ª—é—á–∏—Ç–µ Docker compatibility mode:
  - Settings ‚Üí Connections ‚Üí Enable Docker compatibility socket

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è

```bash
# –û—á–∏—Å—Ç–∫–∞ Docker –∫—ç—à–∞
docker system prune -a

# –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –±–µ–∑ –∫—ç—à–∞
# –í VS Code: F1 ‚Üí Dev Containers: Rebuild Container (Without Cache)
```

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –Ω–∞ macOS/Windows

Docker Desktop –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ –Ω–∞ macOS/Windows –∏–∑-–∑–∞ –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏—è:**
- –£–≤–µ–ª–∏—á—å—Ç–µ –ø–∞–º—è—Ç—å –¥–ª—è Docker Desktop (Settings ‚Üí Resources)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ WSL2 –Ω–∞ Windows
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –∞–Ω—Ç–∏–≤–∏—Ä—É—Å–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ UID –Ω–∞ host –º–∞—à–∏–Ω–µ
id -u

# –ï—Å–ª–∏ –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å 1000, –æ–±–Ω–æ–≤–∏—Ç–µ Dockerfile:
ARG USER_UID=<–≤–∞—à UID>
```

### Docker socket –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Docker socket –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω
ls -la /var/run/docker.sock

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
docker ps
```

–ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Docker –∑–∞–ø—É—â–µ–Ω –Ω–∞ host
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ mount –≤ `devcontainer.json`
- –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [VS Code DevContainers –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://code.visualstudio.com/docs/devcontainers/containers)
- [Debian –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑](https://hub.docker.com/_/debian)
- [DevContainers —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è](https://containers.dev/)
